!function(e){const t={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var o,n,r,a,c,u,s,l="",i=0;for(e=t._utf8_encode(e);i<e.length;)a=(o=e.charCodeAt(i++))>>2,c=(3&o)<<4|(n=e.charCodeAt(i++))>>4,u=(15&n)<<2|(r=e.charCodeAt(i++))>>6,s=63&r,isNaN(n)?u=s=64:isNaN(r)&&(s=64),l=l+this._keyStr.charAt(a)+this._keyStr.charAt(c)+this._keyStr.charAt(u)+this._keyStr.charAt(s);return l},decode:function(e){var o,n,r,a,c,u,s="",l=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)o=this._keyStr.indexOf(e.charAt(l++))<<2|(a=this._keyStr.indexOf(e.charAt(l++)))>>4,n=(15&a)<<4|(c=this._keyStr.indexOf(e.charAt(l++)))>>2,r=(3&c)<<6|(u=this._keyStr.indexOf(e.charAt(l++))),s+=String.fromCharCode(o),64!=c&&(s+=String.fromCharCode(n)),64!=u&&(s+=String.fromCharCode(r));return s=t._utf8_decode(s)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",o=0;o<e.length;o++){var n=e.charCodeAt(o);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},_utf8_decode:function(e){for(var t="",o=0,n=c1=c2=0;o<e.length;)(n=e.charCodeAt(o))<128?(t+=String.fromCharCode(n),o++):n>191&&n<224?(c2=e.charCodeAt(o+1),t+=String.fromCharCode((31&n)<<6|63&c2),o+=2):(c2=e.charCodeAt(o+1),c3=e.charCodeAt(o+2),t+=String.fromCharCode((15&n)<<12|(63&c2)<<6|63&c3),o+=3);return t}};e(function(){let o="";e("#new-quote-button").on("click",function(t){t.preventDefault(),o=document.URL,e.ajax({method:"get",url:qod_api.rest_url+"wp/v2/posts?filter[orderby]=rand&filter[posts_per_page]=1"}).fail(function(e){console.log(e)}).done(function(t){const n=t[0],r=n.slug,a=`${qod_api.home_url}/${r}/`;history.pushState(null,null,a);const c=e(".entry-content"),u=n.content.rendered,s=e(".entry-title"),l=n.title.rendered;let i,d;c.html(u),n._qod_quote_source&&n._qod_quote_source_url?(i=n._qod_quote_source,d=n._qod_quote_source_url,s.html(`\n                        — <span class="author">${l}</span>, \n                        <span class="source">\n                            <a href="${d}">\n                            ${i}\n                            </a>\n                        </span>`)):n._qod_quote_source?(i=n._qod_quote_source,s.html(`\n                            — <span class="author">${l}</span>, \n                            <span class="source">\n                            ${i}\n                            </span>\n                        `)):s.html(`\n                            — <span class="author">${l}</span>\n                        `),e(window).on("popstate",function(){window.location.replace(o)})})}),e("#quote-submission-form").on("submit",function(t){t.preventDefault();let o=e("#quote-author").val().trim().length<1?null:e("#quote-author").val(),n=e("#quote-content").val().trim().length<1?null:e("#quote-content").val(),r=e("#quote-source").val().trim().length<1?null:e("#quote-source").val(),a=e("#quote-source-url").val().trim().length<1?null:e("#quote-source-url").val();e.ajax({method:"post",url:qod_api.rest_url+"wp/v2/posts",data:{status:"publish",title:o,content:n,_qod_quote_source:r,_qod_quote_source_url:a},beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",qod_api.wpapi_nonce)}}).fail(function(e){console.log(e)}).done(function(){e("#quote-submission-form").slideUp(300,function(){e(".quote-submission-wrapper").html("Thanks, your quote submission was received!")})})}),e(".create-new-account").on("click",function(){e("#form-new-account").slideDown(300),e(".quote-submission").slideUp(300)}),e("#form-new-account").on("submit",function(o){o.preventDefault();let n=e("#newAccName").val().trim().length<1?null:e("#newAccName").val(),r=e("#newAccEmail").val().trim().length<1?null:e("#newAccEmail").val(),a=e("#newAccPw").val().trim().length<1?null:e("#newAccPw").val();a===(e("#confirmNewPw").val().trim().length<1?null:e("#confirmNewPw").val())?e.ajax({method:"post",url:qod_api.rest_url+"wp/v2/users",data:{username:n,email:r,password:a},beforeSend:function(e){e.setRequestHeader("Authorization","Basic "+t.encode("admin:qweasd"))}}).fail(function(e){console.log(e)}).done(function(){alert("New user is successfully created.\nPlease log-in."),e("#form-new-account").slideUp(300),e(".quote-submission").slideDown(300)}):alert("Passwords are not match.\nPlease check again.")})})}(jQuery);