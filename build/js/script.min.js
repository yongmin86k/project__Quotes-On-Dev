!function(e){const t={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var n,o,r,a,u,s,c,i="",l=0;for(e=t._utf8_encode(e);l<e.length;)a=(n=e.charCodeAt(l++))>>2,u=(3&n)<<4|(o=e.charCodeAt(l++))>>4,s=(15&o)<<2|(r=e.charCodeAt(l++))>>6,c=63&r,isNaN(o)?s=c=64:isNaN(r)&&(c=64),i=i+this._keyStr.charAt(a)+this._keyStr.charAt(u)+this._keyStr.charAt(s)+this._keyStr.charAt(c);return i},decode:function(e){var n,o,r,a,u,s,c="",i=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");i<e.length;)n=this._keyStr.indexOf(e.charAt(i++))<<2|(a=this._keyStr.indexOf(e.charAt(i++)))>>4,o=(15&a)<<4|(u=this._keyStr.indexOf(e.charAt(i++)))>>2,r=(3&u)<<6|(s=this._keyStr.indexOf(e.charAt(i++))),c+=String.fromCharCode(n),64!=u&&(c+=String.fromCharCode(o)),64!=s&&(c+=String.fromCharCode(r));return c=t._utf8_decode(c)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var o=e.charCodeAt(n);o<128?t+=String.fromCharCode(o):o>127&&o<2048?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t},_utf8_decode:function(e){for(var t="",n=0,o=c1=c2=0;n<e.length;)(o=e.charCodeAt(n))<128?(t+=String.fromCharCode(o),n++):o>191&&o<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((31&o)<<6|63&c2),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&o)<<12|(63&c2)<<6|63&c3),n+=3);return t}};e(function(){let n="";e("#new-quote-button").on("click",function(t){t.preventDefault(),n=document.URL,e.ajax({method:"get",url:qod_api.rest_url+"wp/v2/posts?filter[orderby]=rand&filter[posts_per_page]=1"}).fail(function(e){console.log(e)}).done(function(t){const o=t[0],r=o.slug,a=`${qod_api.home_url}/${r}/`;history.pushState(null,null,a);const u=e(".entry-content"),s=o.content.rendered,c=e(".entry-title"),i=o.title.rendered;let l,d;u.html(s),o._qod_quote_source&&o._qod_quote_source_url?(l=o._qod_quote_source,d=o._qod_quote_source_url,c.html(`\n                        — <span class="author">${i}</span>, \n                        <span class="source">\n                            <a href="${d}">\n                            ${l}\n                            </a>\n                        </span>`)):o._qod_quote_source?(l=o._qod_quote_source,c.html(`\n                            — <span class="author">${i}</span>, \n                            <span class="source">\n                            ${l}\n                            </span>\n                        `)):c.html(`\n                            — <span class="author">${i}</span>\n                        `),e(window).on("popstate",function(){window.location.replace(n)})})}),e("#quote-submission-form").on("submit",function(t){t.preventDefault();let n=e("#quote-author").val().trim().length<1?null:e("#quote-author").val(),o=e("#quote-content").val().trim().length<1?null:e("#quote-content").val(),r=e("#quote-source").val().trim().length<1?null:e("#quote-source").val(),a=e("#quote-source-url").val().trim().length<1?null:e("#quote-source-url").val();e.ajax({method:"post",url:qod_api.rest_url+"wp/v2/posts",data:{status:"publish",title:n,content:o,_qod_quote_source:r,_qod_quote_source_url:a},beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",qod_api.wpapi_nonce)}}).fail(function(t){e("#quote-submission-form").slideUp(300,function(){e(".quote-submission-wrapper").html("There is something wrong. Please try again."),e(".quote-submission-wrapper").append(`<pre>${t}</pre>`)})}).done(function(){e("#quote-submission-form").slideUp(300,function(){e(".quote-submission-wrapper").html("Thanks, your quote submission was received!")})})}),e(".create-new-account").on("click",function(){e("#form-new-account").slideDown(300),e(".quote-submission").slideUp(300)}),e("#form-new-account").on("submit",function(n){n.preventDefault();let o=e("#newAccName").val().trim().length<1?null:e("#newAccName").val(),r=e("#newAccEmail").val().trim().length<1?null:e("#newAccEmail").val(),a=e("#newAccPw").val().trim().length<1?null:e("#newAccPw").val();a===(e("#confirmNewPw").val().trim().length<1?null:e("#confirmNewPw").val())?e.ajax({method:"post",url:qod_api.rest_url+"wp/v2/users",data:{username:o,email:r,password:a},beforeSend:function(e){e.setRequestHeader("Authorization","Basic "+t.encode("admin:qweasd"))}}).fail(function(t){e("#quote-submission-form").slideUp(300,function(){e("#form-new-account").html("There is something wrong. Please try again."),e("#form-new-account").append(`<pre>${t}</pre>`)})}).done(function(){alert("New user is successfully created.\nPlease log-in."),e("#form-new-account").slideUp(300),e(".quote-submission").slideDown(300)}):alert("Passwords are not match.\nPlease check again.")})})}(jQuery);